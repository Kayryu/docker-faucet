(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ab29527"],{2162:function(t,e,a){"use strict";a("66d5")},"2b0f":function(t,e,a){},"386b":function(t,e,a){var s=a("5ca1"),n=a("79e5"),i=a("be13"),o=/"/g,r=function(t,e,a,s){var n=String(i(t)),r="<"+e;return""!==a&&(r+=" "+a+'="'+String(s).replace(o,"&quot;")+'"'),r+">"+n+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(r),s(s.P+s.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",a)}},4740:function(t,e,a){},"543f":function(t,e,a){"use strict";a("2b0f")},6652:function(t,e,a){"use strict";a("4740")},"66d5":function(t,e,a){},"74c9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"back-button"},[a("rect-button",{attrs:{width:"48px"},on:{click:t.back}},[a("i",{staticClass:"el-icon-back"})])],1)},n=[],i=(a("a481"),a("b54a"),a("44be")),o={props:{link:{type:String,default:"/"}},components:{RectButton:i["a"]},methods:{back:function(){this.$routerHistory.hasPrevious()&&this.$routerHistory.previous().path===this.link?this.$router.go(-1):this.$router.replace(this.link)}}},r=o,l=(a("6652"),a("2877")),c=Object(l["a"])(r,s,n,!1,null,"165f60a9",null);e["a"]=c.exports},"8d68":function(t,e,a){},"939d":function(t,e,a){"use strict";a("8d68")},a069:function(t,e,a){},a481:function(t,e,a){"use strict";var s=a("cb7c"),n=a("4bf8"),i=a("9def"),o=a("4588"),r=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,f){return[function(s,n){var i=t(this),o=void 0==s?void 0:s[e];return void 0!==o?o.call(s,i,n):a.call(String(i),s,n)},function(t,e){var n=f(a,t,this,e);if(n.done)return n.value;var d=s(t),v=String(this),p="function"===typeof e;p||(e=String(e));var g=d.global;if(g){var w=d.unicode;d.lastIndex=0}var m=[];while(1){var k=l(d,v);if(null===k)break;if(m.push(k),!g)break;var C=String(k[0]);""===C&&(d.lastIndex=r(v,i(d.lastIndex),w))}for(var y="",_=0,x=0;x<m.length;x++){k=m[x];for(var S=String(k[0]),R=c(u(o(k.index),v.length),0),O=[],N=1;N<k.length;N++)O.push(h(k[N]));var B=k.groups;if(p){var j=[S].concat(O,R,v);void 0!==B&&j.push(B);var D=String(e.apply(void 0,j))}else D=b(S,v,R,O,B,e);R>=_&&(y+=v.slice(_,R)+D,_=R+S.length)}return y+v.slice(_)}];function b(t,e,s,i,o,r){var l=s+t.length,c=i.length,u=p;return void 0!==o&&(o=n(o),u=v),a.call(r,u,(function(a,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(l);case"<":r=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>c){var v=d(u/10);return 0===v?a:v<=c?void 0===i[v-1]?n.charAt(1):i[v-1]+n.charAt(1):a}r=i[u-1]}return void 0===r?"":r}))}}))},a510:function(t,e,a){t.exports=a.p+"img/metamask.4cf8e73b.png"},b54a:function(t,e,a){"use strict";a("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},bd64:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticStyle:{"font-weight":"bold"},attrs:{title:"Install MetaMask",center:"",visible:t.dialogVisiable,"custom-class":"dialog-style",width:"400px",fullscreen:t.isSmallScreen},on:{"update:visible":function(e){t.dialogVisiable=e}}},[s("div",{staticClass:"detail"},[s("img",{staticClass:"image",attrs:{src:a("a510"),alt:"metamask"}}),s("div",{staticClass:"warn"},[t._v("\n      Looks like MetaMask plugin is missing on your browser, you need to\n      connect to MetaMask wallet to continue. Please refresh the page after\n      your installation.\n    ")]),s("rect-button",{staticClass:"create",attrs:{width:"200px"},on:{click:function(e){return t.openLink("https://metamask.io/download.html")}}},[t._v("\n      Install")])],1)])},n=[],i=a("44be"),o={props:{showDialog:{type:Boolean,default:!1}},components:{RectButton:i["a"]},computed:{dialogVisiable:{get:function(){return this.showDialog},set:function(t){return this.$emit("onClose",!1),t}},isSmallScreen:function(){return window.innerWidth<450}},methods:{openLink:function(t){window.open(t),this.$emit("onClose",!1)}}},r=o,l=(a("939d"),a("2877")),c=Object(l["a"])(r,s,n,!1,null,"1f6ec030",null);e["a"]=c.exports},c84b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("auto-hedaer",{scopedSlots:t._u([{key:"left",fn:function(){return[a("back-button",{attrs:{link:"/workspace/"+t.workspaceId}})]},proxy:!0},{key:"right",fn:function(){return[a("div",{staticStyle:{padding:"1px"}})]},proxy:!0}])},[a("h1",{staticClass:"hidden-xs-only"},[t._v(t._s(t.workspace.name))])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"body"},[a("div",{staticClass:"left-panel"},[a("div",{staticClass:"title"},[t._v(t._s(t.proposal.title))]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"about-panel hidden-lg-and-up"},[a("div",{staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("About")]),a("div",{staticClass:"status",style:{background:t.showResult?"#ff4231":"#21b66f"}},[t._v("\n              "+t._s(t.proposal.status)+"\n            ")])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("From")]),a("div",{staticStyle:{"text-align":"right"}},[t._v("\n              "+t._s(t.dateString(t.proposal.start))+"\n            ")])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("To")]),a("div",{staticStyle:{"text-align":"right"}},[t._v("\n              "+t._s(t.dateString(t.proposal.end))+"\n            ")])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("Snapshot")]),a("div",[t._v(t._s(t.proposal.snapshot))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showResult,expression:"!showResult"}],staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("Your token balance")]),a("div",{staticClass:"network"},[t._v(t._s(t.chainName))])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadBalance,expression:"loadBalance"}],staticClass:"balance"},[""!==t.tokenBalance||t.loadBalance?t._e():a("div",{staticClass:"unavailable"},[t._v("\n              Unavailable\n            ")]),a("div",{staticClass:"amount"},[a("div",{staticClass:"result"},[t._v(t._s(t.tokenBalance.balance))]),a("div",[t._v(t._s(t.tokenBalance.symbol))])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("Result")]),a("div",{staticClass:"network"},[t._v(t._s(t.chainName))])]),t._l(t.finalResult,(function(e,s){return a("div",{key:s,staticClass:"balance"},[a("div",{staticClass:"result"},[t._v(t._s(e))])])}))],2)]),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.proposal.content)}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.voting,expression:"voting"}]},[a("content-panel",{directives:[{name:"show",rawName:"v-show",value:!t.showResult&&!t.loading,expression:"!showResult && !loading"}],staticClass:"panel",attrs:{title:t.disableVote||t.voted?"You have voted":"Cast your vote"}},t._l(t.proposal.options,(function(e,s){return a("rect-button",{key:s,staticClass:"item",attrs:{width:"80%",disabled:t.disableVote||t.voted},on:{click:function(e){return t.vote(s,t.proposal.id)}}},[t._v("\n            "+t._s(e)+"\n          ")])})),1)],1),a("content-panel",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"},{name:"loading",rawName:"v-loading",value:t.loadResult,expression:"loadResult"}],staticClass:"panel",attrs:{title:"Results"}},[a("div",{attrs:{id:"echarts"}})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"right-panel hidden-md-and-down"},[a("div",{staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("About")]),a("div",{staticClass:"status",style:{background:t.showResult?"#ff4231":"#21b66f"}},[t._v("\n            "+t._s(t.proposal.status)+"\n          ")])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("From")]),a("div",[t._v(t._s(t.dateString(t.proposal.start)))])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("To")]),a("div",[t._v(t._s(t.dateString(t.proposal.end)))])]),a("div",{staticClass:"state"},[a("div",{staticClass:"content"},[t._v("Snapshot")]),a("div",[t._v(t._s(t.proposal.snapshot))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showResult,expression:"!showResult"}],staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("Your token balance")]),a("div",{staticClass:"network"},[t._v(t._s(t.chainName))])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadBalance,expression:"loadBalance"}],staticClass:"balance"},[""!==t.tokenBalance||t.loadBalance?t._e():a("div",{staticClass:"unavailable"},[t._v("\n            Unavailable\n          ")]),a("div",{staticClass:"amount"},[a("div",{staticClass:"result"},[t._v(t._s(t.tokenBalance.balance))]),a("div",[t._v(t._s(t.tokenBalance.symbol))])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"right-about"},[a("div",{staticClass:"state"},[a("div",{staticClass:"title"},[t._v("Result")]),a("div",{staticClass:"network"},[t._v(t._s(t.chainName))])]),t._l(t.finalResult,(function(e,s){return a("div",{key:s,staticClass:"balance"},[a("div",{staticClass:"result"},[t._v(t._s(e))])])}))],2)]),a("metamask-dialog",{attrs:{showDialog:t.showMetamaskDialog},on:{onClose:function(e){t.showMetamaskDialog=!1}}}),a("network-dialog",{attrs:{showDialog:t.showNetworkDialog},on:{onClose:function(e){t.showNetworkDialog=!1}}})],1)],1)},n=[],i=(a("2caf"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("87b3"),a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("ac6a"),a("456d"),a("75fc")),o=a("bd86"),r=(a("96cf"),a("3b8d")),l=(a("7f7f"),a("8576")),c=a("30cb"),u=a("44be"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"panel-info"},[t._t("default")],2)])},v=[],p={props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}}},h=p,f=(a("2162"),a("2877")),b=Object(f["a"])(h,d,v,!1,null,null,null),g=b.exports,w=a("bd64"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticStyle:{"font-weight":"bold"},attrs:{title:"Change Network",center:"",visible:t.dialogVisiable,"custom-class":"dialog-style",width:"400px",fullscreen:t.isSmallScreen},on:{"update:visible":function(e){t.dialogVisiable=e}}},[s("div",{staticClass:"detail"},[s("img",{staticClass:"image",attrs:{src:a("a510"),alt:"metamask"}}),s("div",{staticClass:"warn"},[t._v("\n      Please switch your metamask network to "+t._s(t.chainName)+".\n    ")]),s("rect-button",{staticClass:"create",attrs:{width:"200px"},on:{click:t.close}},[t._v("\n      Close")])],1)])},k=[],C=a("4aa0"),y={props:{showDialog:{type:Boolean,default:!1}},data:function(){return{address:C["a"].automataAddress,chainName:C["a"].chainInfo.name}},components:{RectButton:u["a"]},computed:{dialogVisiable:{get:function(){return this.showDialog},set:function(t){return this.$emit("onClose",!1),t}},isSmallScreen:function(){return window.innerWidth<450}},methods:{close:function(){this.$emit("onClose",!1)}}},_=y,x=(a("e8e7"),Object(f["a"])(_,m,k,!1,null,"49df917a",null)),S=x.exports,R=a("74c9"),O=a("2f62");function N(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=B(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){r=!0,i=t},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw i}}}}function B(t,e){if(t){if("string"===typeof t)return j(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var I={data:function(){return{fullscreenLoading:!1,finalResult:[],showMetamaskDialog:!1,showNetworkDialog:!1,tokenBalance:"",chainName:C["a"].chainInfo.name,loadResult:!1,loading:!1,loadBalance:!1,disableVote:!1,voting:!1,workspaceId:""}},components:{AutoHedaer:c["a"],RectButton:u["a"],ContentPanel:g,MetamaskDialog:w["a"],NetworkDialog:S,BackButton:R["a"]},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e=this.$route.params.proposal,a=this.$route.params.proposalId,this.workspaceId=a>>20<<20,t.next=6,this.$store.dispatch("changeProposal",{id:a,proposal:e});case 6:if(this.loading=!1,"Active"!==this.proposal.status){t.next=15;break}return this.loadBalance=!0,t.next=11,this.getTokenBalance();case 11:this.tokenBalance=t.sent,this.loadBalance=!1,t.next=27;break;case 15:if("Closed"!==this.proposal.status){t.next=27;break}if(this.loadResult=!0,!this.proposal.result){t.next=21;break}s=this.proposal.result,t.next=24;break;case 21:return t.next=23,Object(l["h"])(this.proposal.id,this.workspace.contract,this.proposal.options);case 23:s=t.sent;case 24:this.loadResult=!1,this.finalResult=s.finalResult||[],s.result&&s.result.length>0&&(this.drawLine(s.result),this.$store.dispatch("updateProposal",{id:this.proposal.id,voteResult:s}));case 27:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:$({showResult:function(){return"Closed"===this.proposal.status},voted:function(){if(this.accountVotes.length>0){var t,e=N(this.accountVotes);try{for(e.s();!(t=e.n()).done;){var a=t.value;if(a.proposalId===this.proposal.id)return!0}}catch(s){e.e(s)}finally{e.f()}return!1}return!1}},Object(O["c"])({proposal:"activeProposal",workspace:"activeWorkspace",accountVotes:"accountVotes"})),methods:$({vote:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showNetworkDialog=!1,this.showMetamaskDialog=!1,t.next=4,Object(l["d"])();case 4:if(a=t.sent,!a){t.next=12;break}return t.next=8,window.ethereum.request({method:"eth_chainId"});case 8:s=t.sent,parseInt(s)===C["a"].chainInfo.id?this.startVote(this.proposal.id,e):this.showNetworkDialog=!0,t.next=13;break;case 12:this.showMetamaskDialog=!0;case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getTokenBalance:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])();case 2:if(e=t.sent,!e){t.next=20;break}return t.prev=4,t.next=7,Object(l["f"])(this.workspace.contract);case 7:if(a=t.sent,!a){t.next=12;break}return t.abrupt("return",a);case 12:return t.abrupt("return","");case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t["catch"](4),t.abrupt("return","");case 18:t.next=21;break;case 20:return t.abrupt("return","");case 21:case"end":return t.stop()}}),t,this,[[4,15]])})));function e(){return t.apply(this,arguments)}return e}(),update:function(){var t=this.$echarts.init(document.getElementById("echarts"));t.setOption({series:[{name:"Result",type:"bar",data:[2,3]}]})},errorNotify:function(t){this.$notify.error({title:"Error",message:t,offset:100})},successNotify:function(t){this.$notify({title:"Success",message:t,offset:100,type:"success"})},dateString:function(t){var e=new Date(1e3*parseInt(t)),a=e.toLocaleString();return"Invalid Date"===a&&(a="Unknown"),a},startVote:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var s,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.disbleVote=!0,this.voting=!0,s=Object(l["c"])(e,a),s.then((function(t){if(console.debug(t),200==t.status){n.voting=!1;var e=t.data.result;switch(e){case 0:n.successNotify("Vote successfully!"),n.disbleVote=!0,n.saveVoteHistory({proposalId:n.proposal.id,title:n.proposal.title});break;case 1:n.errorNotify("Signature error");break;case 3:n.errorNotify("You have voted before"),n.disbleVote=!0,n.saveVoteHistory({proposalId:n.proposal.id,title:n.proposal.title});break;case 9:n.errorNotify("You don't have enough token to vote");break;default:n.errorNotify("Vote failed");break}}})).catch((function(t){console.debug(t),n.voting=!1,n.errorNotify("Vote failed")}));case 4:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getResult:function(t){if(0===t.length)return[];var e=Math.max.apply(Math,Object(i["a"])(t));if(0===e)return["No result"];for(var a=[],s=0;s<this.proposal.options.length;s++)t[s]==e&&a.push(this.proposal.options[s]);return a},drawLine:function(t){var e=this.$echarts.init(document.getElementById("echarts"));e.setOption({tooltip:{},xAxis:{data:this.proposal.options,axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:"#000000",fontSize:20,fontWeight:400},axisLine:{show:!1}},yAxis:{axisLabel:{formatter:function(){return""}},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},series:[{name:"Results",type:"bar",data:t,barWidth:68,label:{show:!0,position:"top",fontSize:20},itemStyle:{borderRadius:[10,10,10,10],color:function(t){var e=["#EF532C","#376FF9","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return e[t.dataIndex]}}}]})}},Object(O["b"])(["saveVoteHistory","successNotify"]))},V=I,A=(a("543f"),Object(f["a"])(V,s,n,!1,null,"027f9d4a",null));e["default"]=A.exports},e8e7:function(t,e,a){"use strict";a("a069")}}]);
//# sourceMappingURL=chunk-7ab29527.703afbe3.js.map